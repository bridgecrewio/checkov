AWSTemplateFormatVersion: "2010-09-09"
Resources:
  FunctionPassingArnPermission:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName: TestFunction.Arn
      Principal: apigateway.amazonaws.com
      SourceArn: ApiGateway.Arn
  
  FunctionPassingAccountPermission:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName: TestFunction.Arn
      Principal: apigateway.amazonaws.com
      SourceAccount: 9012345678
  
  FunctionNotServicePrincipalPermission:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName: TestFunction.Arn
      Principal: "9012345678"
  
  ExampleS3ServicePermission:
    Type: AWS::Lambda::Permission
    Properties:
      FunctionName: TestFunction.Arn
      Action: lambda:InvokeFunction
      Principal: s3.amazonaws.com
      SourceAccount: !Ref 'AWS::AccountId'
      SourceArn: TestBucket.Arn
  
  ExampleEventsServicePermission:
    Type: AWS::Lambda::Permission
    Properties:
      FunctionName: TestFunction.Arn
      Action: lambda:InvokeFunction
      Principal: events.amazonaws.com
      SourceAccount: !Ref 'AWS::AccountId'
      SourceArn: TestBucket.Arn